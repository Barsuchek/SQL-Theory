# Объединение данных
Для данной темы дополнительно потребуется создать таблицы, а так же переименовать уже созданную таблицу.

Созданные таблицы есть в проектах для тренировки.

Уже созданная таблица "Test" переименована в "Person".

## Создание таблицы с объединением данных
```SQL
CREATE TABLE Название_таблицы(
	...
	...
	Название_поля Тип_поля FOREIGN KEY REFERENCES Название_таблицы(Название_поля),
	... );
```

* **CREATE TABLE** - Команда создания таблицы
* **Название_таблицы** - Название таблицы, которую Вы хотите создать
* **Название_поля** - Название поля в таблице, которое Вы хотите связать с другой таблицей
* **Тип_поля** - Тип поля, которое Вы связываете(он должен совпадать с в обоих таблицах)
* **FOREIGN KEY REFERENCES** - Команда для создания ссылки на таблицу
* **Название_таблицы** - Название таблицы, которую вы хотите связать
* **(Название_поля)** - Название поля, которое вы связываете

**Пример:**

```SQL
CREATE TABLE Orders(           --Создание таблицы с объединением данных
	ID INT PRIMARY KEY,
	OrderNumber INT NOT NULL,
	ShopID INT NOT NULL FOREIGN KEY REFERENCES Shop(ID),
	PersonID INT NOT NULL FOREIGN KEY REFERENCES Person(ID),
	Dates DATETIME DEFAULT CURRENT_TIMESTAMP); --Начальное значение - это текущая дата
```

## Заполнение таблиц с объединением данных
Заполним данными таблицу "Shop" данными, которые мы будем продавать.

Для удобства, в СУБД MSSQL Вы можете раскрыть Базы данных, выбрать вашу созданную БД, зайти в таблицы, нажать на таблицу правой кнопкой мыши и нажать "Изменить первые 200 строк". Таким образом Вам надо будет просто вводить данные, которыми вы хотите заполнить таблицу.

!(ЗаполнениеТаблицыShop)[https://github.com/Barsuchek/SQL-theory/blob/main/Info/Photo/ОбъединениеДанных/ТаблицаShop.png]

Теперь начнем заполнять таблицу Orders

!(ЗаполнениеТаблицыOrders)[https://github.com/Barsuchek/SQL-theory/blob/main/Info/Photo/ОбъединениеДанных/ЗаполнениеТаблицыOrders.png]

Назначения полей:
**ID** - Порядковый номер заказа
**OrderNumber** - Номер заказа(Данное поле можно считать лишним, так как поле ID не может повторяться)
**ShopID** - Порядковый номер предмета, который клиент хочет купить в таблице Shop
**PersonID** - Порядковый номер клиента из таблицы Person
**Dates** - Дата совершения заказа

## Вывод значений с объединенными данными(INNER JOIN)
!(СлияниеТаблиц)[https://github.com/Barsuchek/SQL-theory/blob/main/Info/Photo/ОбъединениеДанных/СлияниеТаблиц.png]

```SQL
SELECT Название_таблицы1.Названи_поля1, Название_таблицы2.Название_поля2, ... FROM Название_таблицы3
INNER JOIN Название_таблицы4 ON Название_таблицы2.Название_поля3 = Название_таблицы1.Название_поля4;
```

**SELECT** - Команда выбора
**Название_таблицы1** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля1** - Название поля, которое мы хотим вывести
**Название_таблицы2** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля2** - Название поля, которое мы хотим вывести
**FROM** - Команда "из"
**Название_таблицы3** - Таблица, из которой мы будем выводить данные(из этой таблицы будут браться данные и проверяться с таблицами)
**INNER JOIN** - Команда для объединения данных
**Название_таблицы4** - Таблица, которую мы выбираем для связи
**ON** - Команда, которая нужна чтобы показать, какие данные мы хотим проверять
**Название_таблицы2** - Название таблицы, данные которой мы хотим проверить
**Названи_поля3** - Название поля с ключем, по которому сделана связь между таблицами
**=** - Оператор приравнивания
**Название_таблицы1** - Название таблицы, данные которой мы хотим проверить
**Названи_поля4** - Название поля с ключем, по которому сделана связь между таблицами

**Примеры:**

```SQL
SELECT Orders.ID, Person.Names, Orders.Dates FROM Person   --Вывести поле ID из таблицы Orders, поле Names из таблицы Person и поле Dates из таблицы Orders, выбирая данные для сравнения из таблицы Person
INNER JOIN Orders ON Person.ID = Orders.personID           --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
ORDER BY Orders.ID DESC;                                   --Отсортировать выведенные данные в порядке убывания по полю ID в таблице Orders
```

```SQL
SELECT Shop.Title, Person.Names, Orders.Dates FROM Person  --Вывести поле Title из таблицы Shop, поле Names из таблицы Person и поле Dates из таблицы Orders, выбирая данные для сравнения из таблицы Person
INNER JOIN Orders ON Person.ID = Orders.personID           --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
INNER JOIN Shop ON Shop.ID = Orders.ShopID                 --Обединить таблицу Person и Shop, вывести поля, где Shop.ID = Orders.ShopID
ORDER BY Orders.Dates DESC;                                --Отсортировать выведенные данные в порядке убывания по полю Dates в таблице Orders
```

## Вывод значений с объединенными данными(LEFT JOIN)
!(СлияниеТаблиц)[https://github.com/Barsuchek/SQL-theory/blob/main/Info/Photo/ОбъединениеДанных/СлияниеТаблиц.png]

```SQL
SELECT Название_таблицы1.Названи_поля1, Название_таблицы2.Название_поля2, ... FROM Название_таблицы3
LEFT JOIN Название_таблицы4 ON Название_таблицы2.Название_поля3 = Название_таблицы1.Название_поля4;
```

**SELECT** - Команда выбора
**Название_таблицы1** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля1** - Название поля, которое мы хотим вывести
**Название_таблицы2** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля2** - Название поля, которое мы хотим вывести
**FROM** - Команда "из"
**Название_таблицы3** - Таблица, из которой мы будем выводить данные(из этой таблицы будут браться данные и проверяться с таблицами)
**LEFT JOIN** - Команда для объединения данных
**Название_таблицы4** - Таблица, которую мы выбираем для связи
**ON** - Команда, которая нужна чтобы показать, какие данные мы хотим проверять
**Название_таблицы2** - Название таблицы, данные которой мы хотим проверить
**Названи_поля3** - Название поля с ключем, по которому сделана связь между таблицами
**=** - Оператор приравнивания
**Название_таблицы1** - Название таблицы, данные которой мы хотим проверить
**Названи_поля4** - Название поля с ключем, по которому сделана связь между таблицами

**Примеры:**

```SQL
SELECT Orders.ID, Person.Names, Orders.Dates FROM Person   --Вывести поле ID из таблицы Orders, поле Names из таблицы Person и поле Dates из таблицы Orders, выбирая данные для сравнения из таблицы Person
LEFT JOIN Orders ON Person.ID = Orders.personID            --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
ORDER BY Orders.ID DESC;                                   --Отсортировать выведенные данные в порядке убывания по полю ID в таблице Orders
```

```SQL
SELECT Person.Names, Orders.ID FROM Person                 --Вывести поле Names из таблицы Person и поле ID из таблицы Orders, выбирая данные для сравнения из таблицы Person
LEFT JOIN Orders ON Person.ID = Orders.PersonID            --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
ORDER BY Orders.ID DESC                                    --Отсортировать выведенные данные в порядке убывания по полю ID в таблице Orders
```

## Вывод значений с объединенными данными(RIGHT JOIN)
!(СлияниеТаблиц)[https://github.com/Barsuchek/SQL-theory/blob/main/Info/Photo/ОбъединениеДанных/СлияниеТаблиц.png]

```SQL
SELECT Название_таблицы1.Названи_поля1, Название_таблицы2.Название_поля2, ... FROM Название_таблицы3
RIGHT JOIN Название_таблицы4 ON Название_таблицы2.Название_поля3 = Название_таблицы1.Название_поля4;
```

**SELECT** - Команда выбора
**Название_таблицы1** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля1** - Название поля, которое мы хотим вывести
**Название_таблицы2** - Название таблицы, в которой мы хотим выбрать поле для вывода
**.** - Разделитель, после которого надо указать поле, которое мы хотим выбрать
**Названи_поля2** - Название поля, которое мы хотим вывести
**FROM** - Команда "из"
**Название_таблицы3** - Таблица, из которой мы будем выводить данные(из этой таблицы будут браться данные и проверяться с таблицами)
**RIGHT JOIN** - Команда для объединения данных
**Название_таблицы4** - Таблица, которую мы выбираем для связи
**ON** - Команда, которая нужна чтобы показать, какие данные мы хотим проверять
**Название_таблицы2** - Название таблицы, данные которой мы хотим проверить
**Названи_поля3** - Название поля с ключем, по которому сделана связь между таблицами
**=** - Оператор приравнивания
**Название_таблицы1** - Название таблицы, данные которой мы хотим проверить
**Названи_поля4** - Название поля с ключем, по которому сделана связь между таблицами

**Примеры:**

```SQL
SELECT Orders.ID, Person.Names, Orders.Dates FROM Person   --Вывести поле ID из таблицы Orders, поле Names из таблицы Person и поле Dates из таблицы Orders, выбирая данные для сравнения из таблицы Person
RIGHT JOIN Orders ON Person.ID = Orders.personID           --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
ORDER BY Orders.ID DESC;                                   --Отсортировать выведенные данные в порядке убывания по полю ID в таблице Orders
```

```SQL
SELECT Person.Names, Orders.ID FROM Person                 --Вывести поле Names из таблицы Person и поле ID из таблицы Orders, выбирая данные для сравнения из таблицы Person
RIGHT JOIN Orders ON Person.ID = Orders.PersonID            --Обединить таблицу Person и Orders, вывести поля, где Person.ID = Orders.PersonID
ORDER BY Orders.ID DESC                                    --Отсортировать выведенные данные в порядке убывания по полю ID в таблице Orders
```
